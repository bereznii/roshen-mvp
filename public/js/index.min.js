!function(){return function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){return r(t[a][1][e]||e)},d,d.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}}()({1:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=!0,i=null,a={},s=null;function l(e){var t=document.getElementById(e);t&&(t.style.display="none",t.setAttribute("hidden","hidden"))}function c(e){var t=document.getElementById(e);t&&(t.style.display="block",t.removeAttribute("hidden"))}function d(e){l("index"),l("estimate"),l("success");var t=document.getElementById("error");if(t){var n=[];n="string"==typeof e?[e]:"object"===o(e)&&"[object Array]"===Object.prototype.toString.call(e)&&e.length?e:["Дякуємо, але...","Ви вже голосували"],t.innerHTML='\n            <div class="info__content">\n                <img class="info__image" src="/img/warning.png" srcset="/img/warning@2x.png 2x, /img/warning.png 1x" alt="">\n                '.concat(n.map(function(e){return'<p class="info__description">'.concat(e,"</p>")}).join("\n"),"\n            </div>\n        "),c("error")}c("contact"),window.scrollTo(0,0)}function u(e,t){if(!e||!t||!t.length)return d("Продукт не знайдено");var n=document.getElementById("estimate");if(n){var o='<img class="estimate__image" src="'.concat(e.image||"/img/products/candy-nut.png",'" alt="">'),i='<p class="estimate__description">'.concat(e.name||"","</p>"),l='<div class="estimate__product">'.concat(o).concat(i,"</div>"),c=t.map(function(e){var t='<span class="estimate__name">'.concat(e.name||"","</span>"),n=[1,2,3,4,5].map(function(t){var n='<input class="rating__radio" type="radio" name="property-'.concat(e.id,'" value="').concat(t,'" required>');return'<label class="rating__item">'.concat(t," ").concat(n," ").concat('\n        <svg width="22" height="21" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path fill-rule="evenodd" clip-rule="evenodd" d="M15.553 0c-1.447 0-2.38.172-3.45.696a6.166 6.166 0 00-1.113.7A6.3 6.3 0 009.922.728C8.832.188 7.85 0 6.455 0 2.716 0 0 3.097 0 7.12c0 3.038 1.694 5.972 4.849 8.81 1.656 1.49 3.77 2.963 5.285 3.747l.866.45.866-.45c1.515-.784 3.63-2.258 5.285-3.747C20.306 13.092 22 10.158 22 7.12 22 3.14 19.258.015 15.553 0zM20 7.12c0 2.38-1.414 4.83-4.186 7.323-1.512 1.36-3.455 2.718-4.814 3.43-1.359-.712-3.302-2.07-4.814-3.43C3.414 11.949 2 9.5 2 7.12 2 4.148 3.884 2 6.455 2c1.11 0 1.793.132 2.58.52.465.23.876.534 1.232.914l.735.785.73-.791a4.18 4.18 0 011.25-.936C13.746 2.118 14.387 2 15.549 2 18.09 2.01 20 4.189 20 7.12z"/>\n            <path d="M15.553 0c-1.447 0-2.381.172-3.45.696a6.146 6.146 0 00-1.113.7A6.316 6.316 0 009.922.728C8.831.189 7.85 0 6.455 0 2.716 0 0 3.097 0 7.12c0 3.038 1.694 5.972 4.849 8.81 1.656 1.489 3.77 2.963 5.285 3.747l.866.449.866-.449c1.515-.784 3.629-2.258 5.285-3.747C20.306 13.092 22 10.158 22 7.12 22 3.14 19.258.015 15.553 0z" fill-rule="evenodd"/>\n        </svg>\n    ',"</label>")});return'<li class="estimate__item">'.concat(t,' <div class="rating"> ').concat(n.join("\n")," </div> </li>")}),u='<ul class="estimate__list">'.concat(c.join("\n"),"</ul>"),p='<form class="estimate__rating" id="rating-form" action="">'.concat(u).concat('<button class="button" type="submit" disabled>Готово</button>',"</form>");n.innerHTML="".concat('<h1 class="estimate__title">Запрошуємо прийняти участь в оцінці нашого виробу</h1>'," ").concat('<p class="estimate__subtitle">Ваша оцінка можлива тільки ОДИН раз</p>'," ").concat(l," ").concat(p),n.style.display="block",n.removeAttribute("hidden"),s=e.id,a=t.reduce(function(e,t){var n="property-"+t.id;return e[n]={id:t.id,name:n,selector:'input[name="'.concat(n,'"]')},e},a||{}),function(){var e=document.getElementById("rating-form");if(!e)return;for(var t in e.setAttribute("novalidate","novalidate"),a)a.hasOwnProperty(t)&&(a[t].elements=e.querySelectorAll(a[t].selector),a[t].elements&&a[t].elements.length||(a[t]=null));e.addEventListener("input",v),e.addEventListener("change",f);var n=e.querySelector('button[type="submit"]');m(a)?n.removeAttribute("disabled"):n.setAttribute("disabled","disabled");e.addEventListener("submit",function(t){if(t.preventDefault(),m(a))!function(){if(!r){r=!0;var e=document.getElementById("rating-form"),t=e.querySelector('button[type="submit"]');t.setAttribute("disabled","disabled");var n={product_id:s,vote:[]};for(var o in a)if(a.hasOwnProperty(o)&&a[o]){var i=e.querySelectorAll(a[o].selector);if(!i||!i.length)continue;for(var l=null,c=0;c<i.length;c++)(l=i[c])&&("radio"===l.type?l.checked&&n.vote.push({property_id:a[o].id,value:+l.value}):n[a[o].name]=l.value)}var u=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),p=new XMLHttpRequest;(p.responseType="json")===p.responseType?(p.onreadystatechange=function(){if(4===this.readyState){var e=this.response;200===this.status?e&&e.status&&"success"===e.status?(function(e){var t=window.localStorage.getItem("votes")||"[]";try{var n=JSON.parse(t);n.push(e),window.localStorage.setItem("votes",JSON.stringify(n))}catch(e){return!1}}(s),function(){var e=document.getElementById("estimate");e&&(e.style.display="none",e.setAttribute("hidden","hidden"));var t=document.getElementById("success");t&&(t.style.display="block",t.removeAttribute("hidden"));var n=document.getElementById("contact");n&&(n.style.display="block",n.removeAttribute("hidden"));window.scrollTo(0,0)}()):(console.log("form error, no success",e),d("Сталася помилка")):(console.log("send form failed",e),d("Сталася помилка")),r=!1,t.removeAttribute("disabled")}},p.open("POST","/api/vote"),p.setRequestHeader("Content-Type","application/json;charset=UTF-8"),p.setRequestHeader("X-CSRF-TOKEN",u),p.send(JSON.stringify(n))):console.log("not supported responseType")}}();else{var n=e.querySelector('button[type="submit"]');n.setAttribute("disabled","disabled"),n.blur()}})}()}}function p(e){if(!e||!e.validity)return!1;return!(""===e.value||!/[^\s]+/.test(e.value))&&!!e.validity.valid}function m(e){var t=!0;for(var n in e)if(e.hasOwnProperty(n)&&e[n]&&e[n].elements){var o=e[n].elements;if(!o||!o.length)return console.log("no elements"),!0;for(var r=null,i=!1,a=0;a<o.length;a++){if(!(r=o[a])||!r.validity)return console.log("no validation"),!0;"radio"===r.type?i=i||r.checked:p(r)?(r.classList.remove("invalid"),r.closest("label").classList.remove("invalid")):(r.classList.add("invalid"),r.closest("label").classList.add("invalid"),t=!1)}"radio"===r.type&&(t=i)}return t}function v(e){var t=e.target;if(t&&t.validity){var n=p(t),o=t.form.querySelector('button[type="submit"]');n&&(t.classList.remove("invalid"),t.closest("label").classList.remove("invalid"),o.removeAttribute("disabled"),m(a)?o.removeAttribute("disabled"):o.setAttribute("disabled","disabled"))}}function f(e){var t=e.target;if(t&&t.validity){var n=p(t),o=t.form.querySelector('button[type="submit"]');n?(t.classList.remove("invalid"),t.closest("label").classList.remove("invalid")):(t.classList.add("invalid"),t.closest("label").classList.add("invalid")),"radio"===t.type&&function(e){if(e&&"radio"===e.type)for(var t=e.getAttribute("name"),n=e.getAttribute("value"),o=e.form.querySelectorAll('input[name="'.concat(t,'"]')),r=0;r<o.length;r++)o[r]&&"radio"===o[r].type&&(o[r].value<=n?o[r].closest("label").classList.add("active"):o[r].closest("label").classList.remove("active"))}(t),m(a)?o.removeAttribute("disabled"):o.setAttribute("disabled","disabled")}}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";if(!i||i!==e){if(i=e,window.location.pathname!==e){if(!window.history||!window.history.pushState)return;window.history.pushState(null,"link",e)}if("/"!==e&&!/^\/.+$/i.test(e)||/^\/admin\/.*$/i.test(e)||"/admin"==e)return window.location=e;var t=e.split("/");document.getElementById("index");t&&2===t.length&&""===t[1]?(c("index"),l("estimate"),l("contact"),l("success"),l("error")):l("index"),t&&3===t.length&&"product"===t[1]&&(t[2]&&/^\d+$/i.test(t[2])?function(e){var t=window.localStorage.getItem("votes");if(!t)return!1;try{var n=JSON.parse(t);return n.indexOf(""+e)>=0||n.indexOf(+e)>=0}catch(e){return!1}}(+t[2])?d(["Дякуємо, але...","Ви вже голосували"]):function(e){if(e){var t="/api/product/"+e,n=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),o={id:e},r=[];for(var i in o)o.hasOwnProperty(i)&&r.push("".concat(i,"=").concat(o[i]));var a=r.join("&"),s=new XMLHttpRequest;(s.responseType="json")===s.responseType?(s.onreadystatechange=function(){if(4===this.readyState){var e=this.response;200===this.status?e&&e.status&&"success"===e.status&&e.product&&e.properties?u(e.product,e.properties):(console.log("getProduct error, no success",e),d("Продукт не знайдено")):(console.log("getProduct failed",e),d("Сталася помилка"))}},s.open("GET","".concat(t,"?").concat(a),!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.setRequestHeader("X-CSRF-TOKEN",n),s.send()):console.log("not supported responseType")}}(t[2]):d("Продукт не знайдено")),window.scrollTo(0,0)}}function g(e){if(e&&e.target){var t="A"==e.target.nodeName?e.target:e.target.closest("A");if(t&&window.history&&window.history.pushState){var n=t.getAttribute("target"),o=t.getAttribute("href");e.defaultPrevented||0!==e.button||n&&"_self"!==n||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||o&&/^\/.*$/i.test(o)&&(e.preventDefault(),y(o))}}}function b(e){y(window.location.pathname)}function h(){r=!1,y(window.location.pathname),document.addEventListener("click",g),window.addEventListener("popstate",b)}"loading"==document.readyState?document.addEventListener("DOMContentLoaded",h):h(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})},{}]},{},[1]);
//# sourceMappingURL=index.min.js.map
